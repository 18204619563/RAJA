

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring and Building RAJA &mdash; RAJA 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="RAJA 0.1.0 documentation" href="index.html"/>
        <link rel="next" title="Developer Guide" href="dev_guide.html"/>
        <link rel="prev" title="RAJA Proxy Applications" href="advanced_examples.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> RAJA
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primer.html">RAJA Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_examples.html">Index of RAJA Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_examples.html">RAJA Proxy Applications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Configuring and Building RAJA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cmake-system">CMake System</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-options">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#host-config-files">Host-Config Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#did-i-build-raja-correctly">Did I build RAJA correctly?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="future.html">Future Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="raja_license.html">RAJA License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">RAJA</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Configuring and Building RAJA</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/config_build.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-and-building-raja">
<h1>Configuring and Building RAJA<a class="headerlink" href="#configuring-and-building-raja" title="Permalink to this headline">¶</a></h1>
<p>This section describes RAJA configuration options and how to build RAJA.</p>
<p>It is important to note that RAJA requires compiler support for lambda
functions and a few other C++11 features. Please make sure your compiler
is C++11-compliant before attempting to build RAJA.</p>
<div class="section" id="cmake-system">
<h2>CMake System<a class="headerlink" href="#cmake-system" title="Permalink to this headline">¶</a></h2>
<p>RAJA uses a simple CMake-based system, but you don&#8217;t need to know much
about CMake to build RAJA. It does require that you use a CMake version
greater than 2.8. If needed, you can learn more about CMake and download
it at <a class="reference external" href="http://www.cmake.org">http://www.cmake.org</a></p>
<p>You can build RAJA like any other CMake project. The simplest way to build
it is to do the following in the top-level RAJA directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>$ mkdir build
$ <span class="nb">cd</span> build
$ cmake ../
$ make
</pre></div>
</div>
<p>This will build RAJA and the tests it contains using default settings
based on the system and compiler choices (described below).</p>
<p>Note that the RAJA CMake system does not allow in-source builds so that
you can easily configure and build for various systems and compilers from
the same source code.</p>
</div>
<div class="section" id="configuration-options">
<h2>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h2>
<p>The RAJA configuration can be set using standard CMake variables along with
RAJA-specific variables. For example, to make a release build with some
system default GNU compiler and then install the RAJA header files and
libraries in a specific directory location, you could do the following in
the top-level RAJA directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>$ mkdir build-gnu-release
$ <span class="nb">cd</span> build-gnu-release
$ cmake <span class="se">\</span>
  -DCMAKE_C_COMPILER<span class="o">=</span>gcc <span class="se">\</span>
  -DCMAKE_CXX_COMPILER<span class="o">=</span>g++ <span class="se">\</span>
  -DCMAKE_BUILD_TYPE<span class="o">=</span>Release <span class="se">\</span>
  -DCMAKE_INSTALL_PREFIX<span class="o">=</span>../install-gnu-release ../
$ make
$ make install
</pre></div>
</div>
<p>Following CMake conventions, RAJA supports three build types: &#8216;Release&#8217;,
&#8216;RelWithDebInfo&#8217;, and &#8216;Debug&#8217;. Depending on which you choose, you will not
have to explicitly add the &#8216;-g&#8217; compiler flags to generate debugging symbols.
The default compiler flags for optimization, etc. for various compilers can
be found in the <cite>cmake/SetupCompilers.cmake</cite> file.</p>
<p>RAJA uses a variety of custom variables to control how it is compiled. Many
of these manifest as compilation directives and definitions that appear in
the RAJA &#8216;config.hxx&#8217; file that is generated during the CMake process. The
RAJA configuration header file is included in other RAJA headers as needed
so all options propagate through the build process consistently.</p>
<p>These variables are turned on and off similar to standard CMake variables;
e.g., to enable RAJA OpenMP functionality, add this CMake option</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span><span class="n">DRAJA_ENABLE_OPENMP</span><span class="o">=</span><span class="n">On</span>
</pre></div>
</div>
<p>The following list describes the RAJA CMake variables and their defaults.</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>Tests</strong></p>
<blockquote>
<div><p>The variable that controls whether RAJA tests are compiled with the
library is:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_ENABLE_TESTS</td>
<td>On</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Programming Models</strong></p>
<blockquote>
<div><p>Variables that control which RAJA programming model back-ends are enabled
are (names are descriptive of what they enable):</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_ENABLE_OPENMP</td>
<td>On</td>
</tr>
<tr class="row-odd"><td>RAJA_ENABLE_CUDA</td>
<td>Off</td>
</tr>
<tr class="row-even"><td>RAJA_ENABLE_CILK</td>
<td>Off</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Data Types, Sizes, Alignment Parameters, etc.</strong></p>
<blockquote>
<div><p>RAJA provides typedefs that can be used to parametrize floating
point types in applications and easily switch between types. Exactly
one of these can be on at a time. The defaults should be reasonable
for most situations. For more details on these options, please see
the header file real_datatypes.hxx.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_USE_DOUBLE</td>
<td>On</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_FLOAT</td>
<td>Off</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Similarly, there is a typedef for complex data types that can be enabled
if needed.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_USE_COMPLEX</td>
<td>Off</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>There are several variables that control RAJA floating-point data
pointer typedefs. Exactly one of these can be on at a time. When
RAJA is compiled for CPU execution only, the defaults are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_USE_BARE_PTR</td>
<td>Off</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_RESTRICT_PTR</td>
<td>On</td>
</tr>
<tr class="row-even"><td>RAJA_USE_RESTRICT_ALIGNED_PTR</td>
<td>Off</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_PTR_CLASS</td>
<td>Off</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>When RAJA is compiled with CUDA enabled, the defaults are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_USE_BARE_PTR</td>
<td>On</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_RESTRICT_PTR</td>
<td>Off</td>
</tr>
<tr class="row-even"><td>RAJA_USE_RESTRICT_ALIGNED_PTR</td>
<td>Off</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_PTR_CLASS</td>
<td>Off</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>What these variables mean:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_USE_BARE_PTR</td>
<td>Use standard C-style pointer</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_RESTRICT_PTR</td>
<td>Use C-style pointer with restrict
qualifier</td>
</tr>
<tr class="row-even"><td>RAJA_USE_RESTRICT_ALIGNED_PTR</td>
<td>Use C-style pointer with restrict
qualifier and alignment attribute
(see RAJA_DATA_ALIGN below)</td>
</tr>
<tr class="row-odd"><td>RAJA_USE_PTR_CLASS</td>
<td>Use pointer class with overloaded <cite>[]</cite>
operator that applies restrict and
alignment intrinsics. This is useful
when a compiler does not support
attributes in a typedef.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>RAJA internally uses parameters to define platform-specific constants
for index ranges and data alignment. The variables that control these
are:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="57%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_RANGE_ALIGN</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>RAJA_RANGE_MIN_LENGTH</td>
<td>32</td>
</tr>
<tr class="row-even"><td>RAJA_DATA_ALIGN</td>
<td>64</td>
</tr>
<tr class="row-odd"><td>RAJA_COHERENCE_BLOCK_SIZE</td>
<td>64</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>What these variables mean:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_RANGE_ALIGN</td>
<td>Constrain alignment of begin/end indices
of range segments generated by index set
builder methods; i.e., begin and end
indices of such segments will be
multiples of this value.</td>
</tr>
<tr class="row-odd"><td>RAJA_RANGE_MIN_LENGTH</td>
<td>Sets minimum length of range segments
generated by index set builder methods.
This should be an integer multiple of
RAJA_RANGE_ALIGN.</td>
</tr>
<tr class="row-even"><td>RAJA_DATA_ALIGN</td>
<td>Specifies data alignment used in
intrinsics and typedefs;
units of <strong>bytes</strong>.</td>
</tr>
<tr class="row-odd"><td>RAJA_COHERENCE_BLOCK_SIZE</td>
<td>Defines thread coherence value for
shared memory blocks used by RAJA
reduction objects.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Timer Options</strong></p>
<blockquote>
<div><p>RAJA provides a simple portable timer class that is used in RAJA
example codes to determine execution timing and can be used in other apps
as well.  This timer can use any of four internal timers depending on
your preferences, and one should be selected by setting the <cite>RAJA_TIMER</cite>
variable.  If the <cite>RAJA_CALIPER</cite> variable, default off, is set to on, the
timer will also offer caliper-based region annotations.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_TIMER</td>
<td>chrono (default)
gettime
clock
cycle</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>What these variables mean:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>chrono</td>
<td>Use the std::chrono library from the STL</td>
</tr>
<tr class="row-odd"><td>gettime</td>
<td>Use <cite>timespec</cite> from the C standard
library time.h file</td>
</tr>
<tr class="row-even"><td>clock</td>
<td>Use <cite>clock_t</cite> from time.h</td>
</tr>
<tr class="row-odd"><td>cycle</td>
<td>Use <cite>ticks</cite> from the cycle.h file
borrowed from the FFTW library</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Other RAJA Features</strong></p>
<blockquote>
<div><p>RAJA contains features that are turned off by default since they may
not be of interest to all RAJA users. The variables that enable/disable
these features are described below.</p>
<p>The RAJA <em>forallN</em> nested-loop traversals are controlled with the
following variable:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_ENABLE_NESTED</td>
<td>Enable/disable nested loop functionality</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>RAJA has an experimental loop-level fault tolerance model which is
controlled by the following variables:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RAJA_ENABLE_FT</td>
<td>Enable/disable fault-tolerance mechanism</td>
</tr>
<tr class="row-odd"><td>RAJA_REPORT_FT</td>
<td>Enable/disable a report of fault-
tolerance enabled run (e.g., number of
faults detected, recovered from,
recovery overhead, etc.)</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="host-config-files">
<h2>Host-Config Files<a class="headerlink" href="#host-config-files" title="Permalink to this headline">¶</a></h2>
<p>The &#8216;host-configs&#8217; directory contains subdirectories with files that define
configurations for various platforms and compilers at LLNL. These <em>host-config</em>
files can be passed to CMake using the &#8216;-C&#8217; option, which initializes the CMake
cache with the configuration specified in each file.  For example, to use
the host-config file for GNU compiler on LLNL LC Linux systems, one could
do the following from the top-level RAJA directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>$ mkdir my-builds
$ <span class="nb">cd</span> my-builds
$ mkdir build-gcc-4.9.3-release
$ <span class="nb">cd</span> build-gnu-4.9.3-release
$ cmake <span class="se">\</span>
  -C ../../host-configs/chaos/gcc_4_9_3.cmake <span class="se">\</span>
  -DCMAKE_BUILD_TYPE<span class="o">=</span>Release <span class="se">\</span>
  -DCMAKE_INSTALL_PREFIX<span class="o">=</span>../install-gcc-4.9.3-release <span class="se">\</span>
  ../..
$ make
</pre></div>
</div>
<p>The host-config files can be easily modified to suit other configurations
as desired.</p>
<p>The <cite>scripts</cite> directory contains several bash shell scripts that are set up
to use the host-config files. For example, you can type the following commands
starting at the top-level RAJA directory to build a version of RAJA for
specific versions of the GNU and Intel compilers in a build subdirectory:</p>
<div class="highlight-sh"><div class="highlight"><pre>$ mkdir my-builds
$ <span class="nb">cd</span> my-builds
$ ../scripts/gcc-4.9.3.sh
$ <span class="nb">cd</span> build-gnu-4.9.3-release
$ make
$ <span class="nb">cd</span> ..
$ ../scripts/icpc-16.0.109.sh
$ <span class="nb">cd</span> build-icpc-16.0.109-release
$ make
</pre></div>
</div>
<p>These scripts serve as useful examples for those who are not fluent in CMake.</p>
</div>
<div class="section" id="did-i-build-raja-correctly">
<h2>Did I build RAJA correctly?<a class="headerlink" href="#did-i-build-raja-correctly" title="Permalink to this headline">¶</a></h2>
<p>You can verify that RAJA is built correctly with the options you want, you
can run some unit tests...</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Need to add a &#8216;make tests&#8217; or &#8216;make check&#8217; target that
compiles (if needed) and runs some basic tests with sensible
output that makes it clear to users that their RAJA build is
good to go or is not.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dev_guide.html" class="btn btn-neutral float-right" title="Developer Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="advanced_examples.html" class="btn btn-neutral" title="RAJA Proxy Applications" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Rich Hornung and Jeff Keasler.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>